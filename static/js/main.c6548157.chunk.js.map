{"version":3,"sources":["../../../src/suggestions.ts","../../../src/index.tsx","../../../src/conf.ts","App.tsx","nginx.conf.ts","index.tsx"],"names":["suggestions","range","directives","label","item","kind","monaco","insertText","documentation","getDirectives","insertTextRules","detail","id","autoClosingPairs","open","close","defaultToken","ignoreCase","brackets","token","tokenizer","root","comment","numbers","next","units","colors","base","inherit","rules","foreground","fontStyle","provideCompletionItems","word","model","startLineNumber","position","endLineNumber","startColumn","endColumn","provideHover","data","console","contents","value","App","editor","React","useRef","resizeHandle","evn","target","width","innerWidth","height","innerHeight","current","layout","useEffect","window","addEventListener","removeEventListener","className","ref","instance","theme","language","options","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c6548157.chunk.js","sourcesContent":["import * as monaco from 'monaco-editor';\nimport directives from './directives.json';\n\nfunction getDirectives(range: monaco.IRange) {\n  return directives.map((item) => (\n    {\n      label: item.n,\n      kind: monaco.languages.CompletionItemKind.Keyword,\n      insertText: item.n,\n      documentation: item.d,\n      range,\n    }\n  ))\n}\n\nexport default function suggestions(range: monaco.IRange): monaco.languages.CompletionList['suggestions'] {\n  return [\n    ...getDirectives(range),\n    {\n      label: 'upstream',\n      kind: monaco.languages.CompletionItemKind.Snippet,\n      insertText: [\n        // eslint-disable-next-line\n        'upstream ${1:upstream_name} {',\n        // eslint-disable-next-line\n        '\\tserver ${0:127.0.0.1:3110};',\n        '}'\n      ].join('\\n'),\n      insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n      detail: 'Upstream Example',\n      range\n    },\n    {\n      label: 'proxy_pass',\n      kind: monaco.languages.CompletionItemKind.Snippet,\n      insertText: [\n        // eslint-disable-next-line\n        'proxy_pass    ${1:http}://${0192.168.188.222:32001};',\n      ].join('\\n'),\n      insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n      detail: 'proxy_pass Example',\n      range\n    },\n    {\n      label: 'location',\n      kind: monaco.languages.CompletionItemKind.Snippet,\n      insertText: [\n        // eslint-disable-next-line\n        'location ${1:/} {\\n\\t${0}\\n}',\n      ].join('\\n'),\n      insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n      detail: 'proxy_pass Example',\n      range\n    },\n  ]\n};","import * as monaco from 'monaco-editor';\nimport { themeConfig, tokenConf } from './conf';\nimport suggestions from './suggestions';\nimport directives from './directives.json';\n\n// Register a new language\nmonaco.languages.register({\n  id: 'nginx'\n});\nmonaco.languages.setLanguageConfiguration('nginx', {\n\tautoClosingPairs: [\n\t\t{ open: '{', close: '}' },\n\t\t{ open: '\"', close: '\"' },\n\t],\n});\nmonaco.languages.setMonarchTokensProvider('nginx', tokenConf);\nmonaco.editor.defineTheme(\"nginx-theme\", themeConfig);\n\nmonaco.languages.registerCompletionItemProvider('nginx', {\n  provideCompletionItems: (model: monaco.editor.ITextModel, position: monaco.Position) => {\n\t\tconst word = model.getWordUntilPosition(position);\n\t\tconst range = {\n\t\t\t\tstartLineNumber: position.lineNumber,\n\t\t\t\tendLineNumber: position.lineNumber,\n\t\t\t\tstartColumn: word.startColumn,\n\t\t\t\tendColumn: word.endColumn\n\t\t};\n\t\treturn { suggestions: suggestions(range) };\n  },\n});\n\nmonaco.languages.registerHoverProvider('nginx', {\n\tprovideHover:  (model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken) => {\n\t\tconst word = model.getWordAtPosition(position);\n\t\tif (!word) return;\n\t\tconst data = directives.find(item => item.n === word.word || item.n === `$${word.word}`);\n\t\tconsole.log('data:', data)\n\t\tif (!data) return;\n\t\tconst range = {\n\t\t\t\tstartLineNumber: position.lineNumber,\n\t\t\t\tendLineNumber: position.lineNumber,\n\t\t\t\tstartColumn: word.startColumn,\n\t\t\t\tendColumn: word.endColumn\n\t\t};\n\t\treturn {\n\t\t\tcontents: [\n\t\t\t\t{ value: `**\\`${data.n}\\`** ${data.m}` },\n\t\t\t\t{ value: `${data.d}` },\n\t\t\t],\n\t\t\trange: range,\n\t\t}\n\t}\n});","import * as monaco from 'monaco-editor';\n\nexport const tokenConf: monaco.languages.IMonarchLanguage = {\n  defaultToken: \"source\",\n  ignoreCase: true,\n  brackets: [\n    { open: \"{\", close: \"}\", token: \"delimiter.bracket\" },\n  ],\n\n  tokenizer: {\n    root: [\n      [/(\")/, 'delimiter.bracket'],\n      // [/[{}()[\\]]/, \"@brackets\"],\n      [/[;,.]/, \"delimiter\"],\n      [/\\\\.* |~|~\\*|!~|!~\\*/, 'string.regexp'],\n      [/\\b\\d+\\w+\\b/, 'number'],\n      [/\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b/, 'number'],\n\t\t\t[/\\b(ip_hash|upstream|server)\\b/, 'http.upstream'],\n\t\t\t[/\\b(add_header|expires|server_tokens)\\b/, 'http.headers'],\n\t\t\t[/\\b(map|map_hash_max_size|map_hash_bucket_size)\\b/, 'module.http'],\n\t\t\t[/\\b(http)\\b/, 'module.http'],\n\t\t\t[/\\b(gzip|gzip_buffers|gzip_comp_level|gzip_disable|gzip_http.version|gzip_min_length|gzip_proxied|gzip_types|gzip_vary)\\b/, 'module.http'],\n\t\t\t[/\\b(on|off)\\b/, 'module.main'],\n\t\t\t[/\\b(access_log|log_format)\\b/, 'module.log'],\n\t\t\t[/\\b(proxy_buffer_size|proxy_buffering|proxy_buffers|proxy_busy_buffers_size|proxy_cache|proxy_cache_background_update|proxy_cache_bypass|proxy_cache_convert_head|proxy_cache_key|proxy_cache_lock|proxy_cache_lock_age|proxy_cache_lock_timeout|proxy_cache_max_range_offset|proxy_cache_methods|proxy_cache_min_uses|proxy_cache_path|proxy_cache_purge|proxy_cache_revalidate|proxy_cache_use_stale|proxy_cache_valid|proxy_connect_timeout|proxy_headers_hash_bucket_size|proxy_headers_hash_max_size|proxy_hide_header|proxy_http_version|proxy_ignore_client_abort|proxy_intercept_errors|proxy_max_temp_file_size|proxy_method|proxy_next_upstream|proxy_next_upstream_tries|proxy_next_upstream_timeout|proxy_pass|proxy_pass_header|proxy_pass_request_body|proxy_pass_request_headers|proxy_read_timeout|proxy_redirect|proxy_redirect_errors|proxy_send_lowat|proxy_send_timeout|proxy_set_body|proxy_set_header|proxy_store|proxy_store_access|proxy_temp_file_write_size|proxy_t|emp_pathproxy_upstream_fail_timeout|proxy_upstream_max_fails)\\b/,\n        'http.proxy'\n      ],\n\t\t\t[/\\b(ssl|ssl_buffer_size|ssl_certificate|ssl_certificate_key|ssl_ciphers|ssl_client_certificate|ssl_crl|ssl_dhparam|ssl_ecdh_curve|ssl_password_file|ssl_prefer_server_ciphers|ssl_protocols|ssl_session_cache|ssl_session_ticket_key|ssl_session_tickets|ssl_session_timeout|ssl_stapling|ssl_stapling_file|ssl_stapling_responder|ssl_stapling_verify|ssl_trusted_certificate|ssl_verify_client|ssl_verify_depth)\\b/,\n        'module.http'\n      ],\n      [/\\b(daemon|env|debug_points|error_log|log_not_found|include|lock_file|master_process|pid|ssl_engine|timer_resolution|types_hash_max_size|user|worker_cpu_affinity|worker_priority|worker_processes|worker_rlimit_core|worker_rlimit_nofile|worker_rlimit_sigpending|working_directory|try_files)\\b/,\n        'module.main'\n      ],\n      [/\\b(alias|chunked_transfer_encoding|client_body_in_file_only|client_body_buffer_size|client_body_temp_path|client_body_timeout|client_header_buffer_size|client_header_timeout|client_max_body_size|default_type|error_page|index |internal|keepalive_timeout|keepalive_requests|large_client_header_buffers|limit_except|limit_rate|listen|location|msie_padding|msie_refresh|optimize_server_names|port_in_redirect|recursive_error_pages|reset_timedout_connection|resolver|resolver_timeout|root|satisfy_any|send_timeout|sendfile|server|server_name|server_names_hash_max_size|server_names_hash_bucket_size|tcp_nodelay|tcp_nopush|types |try_files)\\b/,\n        'module.http'\n      ],\n      [/\\b(accept_mutex|accept_mutex_delay|debug_connection|devpoll_changes|devpoll_events|epoll_events|kqueue_changes|kqueue_events|multi_accept|rtsig_signo|rtsig_overflow_events|rtsig_overflow_test|rtsig_overflow_threshold|use|worker_connections)\\b/, \n        'module.events'\n      ],\n      [/\\b(add_before_body|add_after_body|addition_types)\\b/, 'module.http.addition'],\n      [/\\b(events)\\b/, 'module.events'],\n      [/\\b(fastcgi_index|fastcgi_hide_header|fastcgi_ignore_client_abort|fastcgi_intercept_errors|fastcgi_param|fastcgi_pass|fastcgi_pass_header|fastcgi_read_timeout|fastcgi_redirect_errors|fa|stcgi_storefastcgi_store_access|fastcgi_buffers|fastcgi_buffers_size|fastcgi_temp_path|fastcgi_buffer_size|fastcgi_connect_timeout|fastcgi_send_timeout|fastcgi_split_path_info)\\b/,\n        'module.http'\n      ],\n\t\t\t[/\\$\\w+/, 'variable'],\n      [/#.*$/, \"comment\"],\n      // { include: \"@numbers\" },\n    ],\n    comment: [\n      [/#.*$/, \"comment\"],\n    ],\n    // urldeclaration: [\n    //     ['[^)\\r\\n]+', 'string'],\n    //     ['\\\\)', { token: 'delimiter.parenthesis', next: '@pop' }]\n    // ],\n\t\tnumbers: [\n\t\t\t[\n\t\t\t\t'-?(\\\\d*\\\\.)?\\\\d+([eE][\\\\-+]?\\\\d+)?',\n\t\t\t\t{ token: 'attribute.value.number', next: '@units' }\n\t\t\t],\n\t\t\t['#[0-9a-fA-F_]+(?!\\\\w)', 'attribute.value.hex']\n\t\t],\n\t\tunits: [\n\t\t\t[\n\t\t\t\t'(M)?',\n\t\t\t\t'attribute.value.unit',\n\t\t\t\t'@pop'\n\t\t\t]\n\t\t],\n  },\n}\n\n\nexport const themeConfig: monaco.editor.IStandaloneThemeData = {\n  colors: {\n    // 'attribute.value.unit': '#68217a'\n  },\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      token: \"module.http\",\n      foreground: \"#00bbbb\",\n    },\n    {\n      token: \"module.events\",\n      foreground: \"#00bbbb\",\n    },\n    {\n      token: \"http.headers\",\n      foreground: \"#00bbbb\",\n    },\n    {\n      token: \"http.proxy\",\n      foreground: \"#58f18e\",\n    },\n    {\n      token: \"module.main\",\n      foreground: \"#c152e4\",\n      fontStyle: 'bold'\n    },\n    {\n      token: \"module.log\",\n      foreground: \"#4d6aab\",\n    },\n    {\n      token: \"module.http.addition\",\n      foreground: \"#c152e4\",\n    },\n    {\n      token: \"keywords\",\n      foreground: \"#9effff\",\n      fontStyle: 'bold'\n    },\n    {\n      token: \"http.upstream\",\n      foreground: \"#0078d0\",\n      fontStyle: 'bold'\n    },\n    {\n      token: \"identifier\",\n      foreground: \"#8e44ad\",\n    },\n    {\n      token: \"delimiter.bracket\",\n      foreground: \"#737373\",\n    },\n    {\n      token: \"delimiter\",\n      foreground: \"#737373\",\n    },\n  ],\n};\n","import React, { useEffect } from 'react';\nimport MonacoEditor from '@uiw/react-monacoeditor';\nimport { nginxStr } from './nginx.conf';\nimport './App.css';\nimport '../';\n\nconst App: React.FC = () => {\n  const editor = React.useRef<MonacoEditor>();\n  function resizeHandle(evn: UIEvent) {\n    const { target } = evn;\n    const width = (target as Window).innerWidth;\n    const height = (target as Window).innerHeight;\n    if (editor.current && editor.current.editor) {\n      editor.current.editor.layout({ width, height })\n    }\n  }\n  useEffect(() => {\n    if (editor.current && editor.current.editor && window) {\n      window.addEventListener('resize', resizeHandle, false);\n    }\n    return () => {\n      window && window.removeEventListener('resize', resizeHandle, false);\n    }\n  }, []);\n  return (\n    <div className=\"App\">\n      <MonacoEditor\n        ref={(instance) => {\n          if (instance) {\n            editor.current = instance;\n          }\n        }}\n        theme=\"nginx-theme\"\n        language=\"nginx\"\n        value={nginxStr}\n        height=\"100vh\"\n\n        options={{\n          theme: 'vs-dark',\n        }}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","export const nginxStr = `user       www www;  ## Default: nobody\nworker_processes  5;  ## Default: 1\nerror_log  logs/error.log;\npid        logs/nginx.pid;\nworker_rlimit_nofile 8192;\n\nevents {\n  worker_connections  4096;  ## Default: 1024\n}\n\nhttp {\n  include    conf/mime.types;\n  include    /etc/nginx/proxy.conf;\n  include    /etc/nginx/fastcgi.conf;\n  index    index.html index.htm index.php;\n\n  default_type application/octet-stream;\n  log_format   main '$remote_addr - $remote_user [$time_local]  $status '\n    '\"$request\" $body_bytes_sent \"$http_referer\" '\n    '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n  access_log   logs/access.log  main;\n  sendfile     on;\n  tcp_nopush   on;\n  server_names_hash_bucket_size 128; # this seems to be required for some vhosts\n\n  server { # php/fastcgi\n    listen       80;\n    server_name  domain1.com www.domain1.com;\n    access_log   logs/domain1.access.log  main;\n    root         html;\n\n    location ~ \\\\.php$ {\n      fastcgi_pass   127.0.0.1:1025;\n    }\n  }\n\n  server { # simple reverse-proxy\n    listen       80;\n    server_name  domain2.com www.domain2.com;\n    access_log   logs/domain2.access.log  main;\n\n    # serve static files\n    location ~ ^/(images|javascript|js|css|flash|media|static)/  {\n      root    /var/www/virtual/big.server.com/htdocs;\n      expires 30d;\n    }\n\n    # pass requests for dynamic content to rails/turbogears/zope, et al\n    location / {\n      proxy_pass      http://127.0.0.1:8080;\n    }\n  }\n\n  upstream big_server_com {\n    server 127.0.0.3:8000 weight=5;\n    server 127.0.0.3:8001 weight=5;\n    server 192.168.0.1:8000;\n    server 192.168.0.1:8001;\n  }\n\n  server { # simple load balancing\n    listen          80;\n    server_name     big.server.com;\n    access_log      logs/big.server.access.log main;\n\n    location / {\n      proxy_pass      http://big_server_com;\n    }\n  }\n}`","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}